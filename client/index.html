<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="format-detection" content="telephone=no" />
    <title>Glo Head Spa - Salon & Spa Management</title>
    
    <!-- Preconnect to external domains for faster resource loading -->
    <link rel="preconnect" href="https://secure.helcim.app" crossorigin>
    <link rel="dns-prefetch" href="https://secure.helcim.app">
    
    <!-- Preload critical fonts if any -->
    <link rel="preload" href="/src/index.css" as="style">
    <link rel="preload" href="/src/main.tsx" as="script" crossorigin>
    <script>
      (function () {
        try {
          var ls = window.localStorage;
          var customColor = ls.getItem('customColor');
          var darkMode = ls.getItem('darkMode') === 'true';
          var primaryTextColor = ls.getItem('primaryTextColor');
          var secondaryTextColor = ls.getItem('secondaryTextColor');

          if (!customColor) {
            var userStr = ls.getItem('user');
            if (userStr) {
              try {
                var user = JSON.parse(userStr);
                if (user && user.primaryColor) customColor = user.primaryColor;
              } catch (_) {}
            }
          }

          if (!customColor) return;

          function hexToHsl(hex) {
            var r = parseInt(hex.slice(1, 3), 16) / 255;
            var g = parseInt(hex.slice(3, 5), 16) / 255;
            var b = parseInt(hex.slice(5, 7), 16) / 255;
            var max = Math.max(r, g, b), min = Math.min(r, g, b);
            var h = 0, s = 0, l = (max + min) / 2;
            if (max !== min) {
              var d = max - min;
              s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
              switch (max) {
                case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                case g: h = (b - r) / d + 2; break;
                case b: h = (r - g) / d + 4; break;
              }
              h /= 6;
            }
            return [Math.round(h * 360), Math.round(s * 100), Math.round(l * 100)];
          }

          var hsl = hexToHsl(customColor);
          var root = document.documentElement;
          root.style.setProperty('--primary', hsl[0] + ' ' + hsl[1] + '% ' + hsl[2] + '%', 'important');
          root.style.setProperty('--primary-foreground', hsl[0] + ' ' + hsl[1] + '% ' + (hsl[2] > 50 ? '10' : '90') + '%', 'important');
          root.style.setProperty('--accent', hsl[0] + ' ' + Math.max(hsl[1] - 10, 0) + '% ' + Math.min(hsl[2] + 10, 95) + '%', 'important');
          root.style.setProperty('--ring', hsl[0] + ' ' + hsl[1] + '% ' + hsl[2] + '%', 'important');

          if (darkMode) {
            root.classList.add('dark');
          } else {
            root.classList.remove('dark');
          }

          if (primaryTextColor) {
            var p = hexToHsl(primaryTextColor);
            root.style.setProperty('--text-primary', p[0] + ' ' + p[1] + '% ' + p[2] + '%', 'important');
            root.style.setProperty('--foreground', p[0] + ' ' + p[1] + '% ' + p[2] + '%', 'important');
            root.style.setProperty('--card-foreground', p[0] + ' ' + p[1] + '% ' + p[2] + '%', 'important');
            root.style.setProperty('--popover-foreground', p[0] + ' ' + p[1] + '% ' + p[2] + '%', 'important');
          }
          if (secondaryTextColor) {
            var sHsl = hexToHsl(secondaryTextColor);
            root.style.setProperty('--text-secondary', sHsl[0] + ' ' + sHsl[1] + '% ' + sHsl[2] + '%', 'important');
            root.style.setProperty('--muted-foreground', sHsl[0] + ' ' + sHsl[1] + '% ' + sHsl[2] + '%', 'important');
          }
        } catch (_) {}
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <!-- Helcim Pay.js v2 -->
    <script type="text/javascript" src="https://secure.helcim.app/helcim-pay/services/start.js"></script>
  </body>
</html>